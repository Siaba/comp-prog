<!doctype html>
<html class="no-js" lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Practice Mode</title>
    <link rel="stylesheet" href="css/foundation.css">
    <link rel="stylesheet" href="css/app.css">
    <style type="text/css" media="screen">
    #editor { 
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
	
    }
    #acecontainer {
	position: relative;
	height: 100%;
	width: 100%;
    }
	
	body {

	background-image: url("/css/ep_naturalwhite.png");
}
	</style>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
  </head>
  <body>
<div class="nav">
<div class="top-bar">
  <div class="top-bar-left">
    <h3><i class="fi-crown" style="color: #3399ff;">&nbsp&nbsp</i><span>CodeChamps</span>
  </div>
  <div class="top-bar-right">
	<ul id="logindd" class="dropdown menu" data-dropdown-menu data-close-on-click-inside="false">
      		<li><a href="Home.html"><b style="font-size:26px" class="fi-home"></b></a></li>
		  	<li><a href="Account.html">Login</a>
				<ul class="menu vertical">
					<li><form action="/Account.html" method="post">
							<label><b>Username</b></label>
								<input type="text" name="user_name" placeholder="username" class="timeblock"/>
							<label><b>Password</b></label>
								<input type="password" name="user_password" placeholder="password" class="timeblock"/>
							<center><button type="submit" class="submit success button">Log in</button></center>
							<p><center>Don't have an account?<br> <a href="CreateAccount.html"><b>Create one now.</b></a></center></p>
						</form>
					</li>
		  		</ul>
		  	</li>
      		<li><a href="Versus.html">Game</a>
			<ul class="menu vertical">
				<li><a href="PracticeMode.html">Practice Mode</a></li>
				<li><a href="Versus.html">Versus Match</a></li>
			</ul>
		</li>
		<li><a href="Account.html">Account</a></li>
		<li><a href="Stats.html">Stats</a></li>
		<li><a href="Leaderboards.html">Leaderboards</a></li>
		<li><a href="History.html">History</a></li>
		<li><a href="CreateAccount.html">Sign Up</a></li>
   	</ul>
  </div>
  </div>
  </div>
    <div class="row">
		<div class="large-8 columns">
		          <select name="problems" id="problems">
		            <option value="helloworld">Hello World</option>
		            <option value="">Recursion</option>
		            <option value="fibonacci">Fibonacci</option>
		          </select>
		</div>
		<script>
		function changeLang(){
			var ddown = document.getElementById('ddown');
			var editor = ace.edit("editor");
			editor.session.setMode("ace/mode/" + ddown.value);
			switch(ddown.value) {
				case 'java':
					editor.setValue("public class test"
					+ "\n{"
					+ "\n\tpublic static void main(String[] args) {"
					+ "\n\t\tSystem.out.println(\"Hello, World\");"
					+ "\n\t}"
					+ "\n}");
					break;
				case 'c_cpp':
					editor.setValue("#include <iostream>"
					+ "\nusing namespace std;"
					+ "\n"
					+ "\nint main()"
					+ "\n{"
					+ "\n\tcout << \"Hello World!\";"
					+ "\n}");
					break;
				case 'python':
					editor.setValue("print(\"Hello World!\");");
					break;
				default:
					editor.setValue("");
			}
		}
		</script>
		<div class="large-8 medium-8 columns">
		<div  id="acecontainer">
			<pre id="editor">function foo(items) {
				var i;
				for (i = 0; i &lt; items.length; i++) {
					alert("Ace Rocks " + items[i]);
				}
			}</pre>
		</div>
		</br>
		<div class="row">
		<form method="post" id="aceform">
			<div class="small-10 columns">
		          <select name="ddown" id="ddown" onchange="changeLang()">
		            <option value="java">Java</option>
		            <option value="c_cpp">C++</option>
		            <option value="python">Python</option>
		          </select>
			</div>
			<input type="hidden" id="aceinput"  name="comments" value=""/>
			<div class="small-2 columns">
			  <button type="submit" class="button">Submit</button>
			</div>
		</form>
		<!--<div class="small-2 columns">
		<button type="button" class="button" onclick="fillace()">Submit</button>
		<script>
		function fillace(){
			var aceinput = document.getElementById('aceinput');
			var editor = ace.edit('editor');
			aceinput.value = editor.getValue();
			
			
			document.getElementById('aceform').submit();
		}
		</script>-->
		
		
		</div>
		</div>
		</div>
		<script src="src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
		<script>
			var editor = ace.edit("editor");
			editor.setTheme("ace/theme/crimson_editor");
			editor.session.setMode("ace/mode/javascript");
			editor.setFontSize(20);
		</script>
		
		<div class="large-4 medium-4 columns">
			<div class="callout">
			  <h5>Description:</h5>
			  <p id="description"><font face="monospace"></font></p>
			</div>
		</div>
      <div class="large-4 medium-4 columns">
        <div class="callout">
		  <h5>Your output:</h5>
		<p id="test"></p>
          <p><font face="monospace">Example output</font></p>
		  <p>Test cases:</p>
		  <style>
			#yourProgress {
			  width: 100%;
			  height: 10px;
			  background-color: #ddd;
			}
			#yourBar {
			  width: 1%;
			  height: 100%;
			  background-color: #4CAF50;
			}
			</style>
			<div id="yourProgress">
			  <div id="yourBar"></div>
			</div>
           <script>
			function moveYourBar() {
			  var elem = document.getElementById("yourBar");   
			  var width = 1;
			  var id = setInterval(frame, 10);
			  function frame() {
				if (width >= 100) {
				  clearInterval(id);
				} else {
				  width++; 
				  elem.style.width = width + '%'; 
				}
			  }
			}
		   </script>
        </div>
      </div>
    </div>

    <script src="js/vendor/jquery.js"></script>
    <script src="js/vendor/what-input.js"></script>
    <script src="js/vendor/foundation.js"></script>
    <script src="js/app.js"></script>
<script>
	console.log("jquery begin");
	$(document).ready(function(){
		console.log("document ready");
		$("#aceform").submit(function(e){
			console.log("preventing default");
			e.preventDefault();
			var aceinput = $('#aceinput');
			var ddown = $('#ddown');
			var editor = ace.edit('editor');
			console.log("editor getvalue:\n-----------------" + editor.getValue());
			aceinput.val(editor.getValue());
			console.log("aceinput val:----------------\n" + aceinput.val());
			console.log("language val:----------------\n" + ddown.val());
			$.post( '/runSandbox', {comments: aceinput.val(), language: ddown.val()}, function(data) {
				console.log("runsandbox post req made");
				$('#test').empty().append(data);
			});
		});
		$('#problems').change(function(e){
			console.log('Chaning problem jQuery script');
			var problem = $('#problems');
			console.log('problem name:\n-----------------' + problem.val());
			$.post( '/getproblem', {problem: problem.val()}, function(data) {
				console.log('getproblem post req made');
				$('#description').empty().append(data);
			});
		});
	});
</script>
  </body>
</html>
